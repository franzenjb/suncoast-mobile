"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[218],{5218:function(e,a,s){s.r(a),s.d(a,{default:function(){return HurricaneMapViewFixed}});var t=s(7437),i=s(2265),n=s(9535),r=s(2232),o=s(1023);let c={currentPosition:[26.8,-83.2],name:"Elena",category:2,maxWinds:100,movement:"NNE at 12 mph",pressure:968,speed:12,forecastTrack:[{time:0,position:[26.8,-83.2],intensity:100},{time:6,position:[27.2,-83],intensity:95},{time:12,position:[27.6,-82.8],intensity:90},{time:24,position:[28.4,-82.5],intensity:75},{time:36,position:[29.2,-82.2],intensity:60},{time:48,position:[30,-81.8],intensity:45}],uncertaintyCone:[{time:12,radius:50},{time:24,radius:100},{time:36,radius:150},{time:48,radius:200}]},calculateHurricaneImpact=function(e,a,s,t){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:12,n=s*Math.PI/180,r=e*Math.PI/180,o=(e-s)*Math.PI/180,c=(a-t)*Math.PI/180,l=Math.sin(o/2)*Math.sin(o/2)+Math.cos(n)*Math.cos(r)*Math.sin(c/2)*Math.sin(c/2),d=3959*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))),m=((180*Math.atan2(Math.sin(c)*Math.cos(r),Math.cos(n)*Math.sin(r)-Math.sin(n)*Math.cos(r)*Math.cos(c))/Math.PI+360)%360-22.5+360)%360,h="",u=1;m>=315||m<45?(h="Front",u=1.2):m>=45&&m<135?(h="Right-Front",u=1.5):m>=135&&m<225?(h="Right-Rear",u=.8):(h="Left",u=.6);let x=Math.min(100,Math.max(0,(d<175?100*(1-d/175*.7):Math.max(0,30-(d-175)*.2))*u));return{distance:Math.round(d),quadrant:h,arrivalHours:Math.round(10*Math.max(0,d/i))/10,probability:Math.round(x)}},l=[{branchNumber:51,locationName:"Crystal River",address:"1039 NE 5th Street",city:"Crystal River",county:"Citrus",region:1,evacuationZone:"A",coordinates:[28.9025,-82.5926]},{branchNumber:49,locationName:"Holiday",address:"3422 U.S. Highway 19",city:"Holiday",county:"Pasco",region:1,evacuationZone:"B",coordinates:[28.1875,-82.7456]},{branchNumber:11,locationName:"Brooksville",address:"18915 Cortez Boulevard",city:"Brooksville",county:"Hernando",region:1,evacuationZone:"No",coordinates:[28.5544,-82.3897]},{branchNumber:3,locationName:"Port Richey",address:"7225 Ridge Road",city:"Port Richey",county:"Pasco",region:1,evacuationZone:"C",coordinates:[28.2719,-82.7193]},{branchNumber:22,locationName:"Spring Hill",address:"4139 Commercial Way",city:"Spring Hill",county:"Hernando",region:1,evacuationZone:"No",coordinates:[28.4789,-82.5253]},{branchNumber:18,locationName:"Inverness",address:"2367 East Gulf to Lake Highway",city:"Inverness",county:"Citrus",region:1,evacuationZone:"No",coordinates:[28.8356,-82.3303]},{branchNumber:172,locationName:"Trinity",address:"10843 State Road 54",city:"Trinity",county:"Pasco",region:1,evacuationZone:"No",coordinates:[28.1808,-82.6593]},{branchNumber:21,locationName:"Dade City",address:"12510 South Highway 301",city:"Dade City",county:"Pasco",region:1,evacuationZone:"No",coordinates:[28.3647,-82.1959]},{branchNumber:67,locationName:"St. Pete Roosevelt",address:"3201 1st Avenue N",city:"St. Petersburg",county:"Pinellas",region:2,evacuationZone:"A",coordinates:[27.7703,-82.6695]},{branchNumber:17,locationName:"Clearwater",address:"2530 Gulf to Bay Boulevard",city:"Clearwater",county:"Pinellas",region:2,evacuationZone:"B",coordinates:[27.9659,-82.8001]},{branchNumber:65,locationName:"Seminole",address:"8901 Seminole Boulevard",city:"Seminole",county:"Pinellas",region:2,evacuationZone:"A",coordinates:[27.8394,-82.7912]},{branchNumber:23,locationName:"South Tampa",address:"4302 Henderson Boulevard",city:"Tampa",county:"Hillsborough",region:3,evacuationZone:"A",coordinates:[27.9506,-82.4572]},{branchNumber:5,locationName:"Brandon",address:"209 West Brandon Boulevard",city:"Brandon",county:"Hillsborough",region:3,evacuationZone:"No",coordinates:[27.9378,-82.2859]},{branchNumber:12,locationName:"Tampa Palms",address:"4302 Boy Scout Boulevard",city:"Tampa",county:"Hillsborough",region:3,evacuationZone:"No",coordinates:[28.0764,-82.3889]},{branchNumber:13,locationName:"Carrollwood",address:"11720 North Dale Mabry Highway",city:"Tampa",county:"Hillsborough",region:3,evacuationZone:"No",coordinates:[28.0341,-82.507]},{branchNumber:4,locationName:"Plant City",address:"2302 James L Redman Parkway",city:"Plant City",county:"Hillsborough",region:3,evacuationZone:"No",coordinates:[28.0186,-82.1287]},{branchNumber:30,locationName:"Lakeland",address:"4414 South Florida Avenue",city:"Lakeland",county:"Polk",region:3,evacuationZone:"No",coordinates:[28.0395,-81.9498]},{branchNumber:2,locationName:"Bradenton Main",address:"4207 14th Street W",city:"Bradenton",county:"Manatee",region:4,evacuationZone:"C",coordinates:[27.4989,-82.5748]},{branchNumber:81,locationName:"Sarasota Main",address:"1800 Ringling Boulevard",city:"Sarasota",county:"Sarasota",region:4,evacuationZone:"C",coordinates:[27.3364,-82.5307]},{branchNumber:9,locationName:"Venice",address:"1359 US Highway 41 Bypass S",city:"Venice",county:"Sarasota",region:4,evacuationZone:"A",coordinates:[27.0998,-82.4543]},{branchNumber:40,locationName:"Fort Myers Main",address:"4707 Cleveland Avenue",city:"Fort Myers",county:"Lee",region:4,evacuationZone:"D",coordinates:[26.6406,-81.8723]},{branchNumber:46,locationName:"Naples Main",address:"2400 North Tamiami Trail",city:"Naples",county:"Collier",region:4,evacuationZone:"C",coordinates:[26.142,-81.7948]}].map(e=>{let a=calculateHurricaneImpact(e.coordinates[0],e.coordinates[1],c.currentPosition[0],c.currentPosition[1],c.speed),s=new Date("2023-08-23T00:00:00"),t=new Date(s.getTime()+36e5*a.arrivalHours),i=new Date(t.getTime()-108e5),n=new Date(t.getTime()+108e5),formatTime=e=>{let a=e.getHours(),s=e.getMinutes(),t=0===s?":00":":".concat(s.toString().padStart(2,"0"));return"Aug ".concat(e.getDate(),", ").concat(a%12||12).concat(t," ").concat(a>=12?"PM":"AM")},r=a.distance<50?"9 hrs":a.distance<100?"7 hrs":a.distance<150?"5 hrs":a.distance<200?"3 hrs":"2 hrs";return{...e,probability:a.probability,earliestArrival:formatTime(i),mostLikelyArrival:formatTime(t),latestArrival:formatTime(n),duration:r,quadrant:a.quadrant,distance:a.distance}}).sort((e,a)=>a.probability-e.probability),d=[{hours:6,coordinates:[[27.4,-82.9],[27.8,-82.7],[28,-82.5],[27.8,-82.3],[27.4,-82.2],[27,-82.4],[26.8,-82.6],[27,-82.8],[27.4,-82.9]]},{hours:12,coordinates:[[28,-82.6],[28.4,-82.4],[28.6,-82.2],[28.4,-82],[28,-81.9],[27.6,-82.1],[27.4,-82.3],[27.6,-82.5],[28,-82.6]]},{hours:18,coordinates:[[28.6,-82.3],[29,-82.1],[29.2,-81.9],[29,-81.7],[28.6,-81.6],[28.2,-81.8],[28,-82],[28.2,-82.2],[28.6,-82.3]]},{hours:24,coordinates:[[29.2,-82],[29.6,-81.8],[29.8,-81.6],[29.6,-81.4],[29.2,-81.3],[28.8,-81.5],[28.6,-81.7],[28.8,-81.9],[29.2,-82]]}];function HurricaneMapViewFixed(){let[e,a]=(0,i.useState)(!1),[m,h]=(0,i.useState)("street"),[u,x]=(0,i.useState)(!0),[b,p]=(0,i.useState)(!0),[y,N]=(0,i.useState)(!0),[g,v]=(0,i.useState)(null),[j,f]=(0,i.useState)(null);(0,i.useEffect)(()=>{Promise.resolve().then(s.t.bind(s,447,23)).then(e=>{Promise.resolve().then(s.bind(s,1286)).then(()=>{let s=e.default;delete s.Icon.Default.prototype._getIconUrl,s.Icon.Default.mergeOptions({iconRetinaUrl:"/leaflet/marker-icon-2x.png",iconUrl:"/leaflet/marker-icon.png",shadowUrl:"/leaflet/marker-shadow.png"}),f(s),a(!0)})})},[]);let getRiskColor=e=>e>=85?"#dc2626":e>=70?"#ea580c":e>=50?"#ca8a04":e>=30?"#65a30d":"#0284c7",getRiskLabel=e=>e>=85?"Extreme":e>=70?"High":e>=50?"Moderate":e>=30?"Low":"Minimal";if(!e||!j)return(0,t.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(n.Z,{className:"h-12 w-12 text-blue-600 animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading Hurricane Map..."})]})});let{MapContainer:w,TileLayer:M,Marker:k,Popup:C,Circle:S,Polyline:H,Polygon:P}=s(1286),R=j.divIcon({className:"hurricane-icon",html:'<div class="relative"><div class="absolute -inset-4 bg-red-500 rounded-full opacity-30 animate-ping"></div><div class="relative bg-red-600 rounded-full p-2 border-2 border-white shadow-lg"><svg width="20" height="20" viewBox="0 0 24 24" fill="white"><path d="M12,2C6.48,2 2,6.48 2,12s4.48,10 10,10 10-4.48 10-10S17.52,2 12,2zm0,18c-4.41,0-8-3.59-8-8s3.59-8 8-8 8,3.59 8,8-3.59,8-8,8z"/><circle cx="12" cy="12" r="3" fill="white"/></svg></div></div>',iconSize:[40,40],iconAnchor:[20,20]});return(0,t.jsxs)("div",{className:"relative h-screen",children:[(0,t.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n        .hurricane-icon {\n          z-index: 1000 !important;\n        }\n        @keyframes ping {\n          75%, 100% {\n            transform: scale(2);\n            opacity: 0;\n          }\n        }\n        .animate-ping {\n          animation: ping 2s cubic-bezier(0, 0, 0.2, 1) infinite;\n        }\n      "}}),(0,t.jsxs)(w,{center:[27.5,-82.5],zoom:7,className:"h-full w-full",whenCreated:v,children:[(0,t.jsx)(M,{...(()=>{switch(m){case"satellite":return{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:"&copy; Esri"};case"radar":return{url:"https://tile.openweathermap.org/map/precipitation_new/{z}/{x}/{y}.png?appid=YOUR_API_KEY",attribution:"&copy; OpenWeatherMap"};default:return{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"&copy; OpenStreetMap contributors"}}})()}),(0,t.jsx)(k,{position:c.currentPosition,icon:R,children:(0,t.jsx)(C,{children:(0,t.jsxs)("div",{className:"p-2",children:[(0,t.jsxs)("h3",{className:"font-bold text-lg",children:["Hurricane ",c.name]}),(0,t.jsxs)("div",{className:"space-y-1 mt-2",children:[(0,t.jsxs)("div",{children:["Category ",c.category]}),(0,t.jsxs)("div",{children:[c.maxWinds," mph winds"]}),(0,t.jsx)("div",{children:c.movement}),(0,t.jsxs)("div",{children:["Pressure: ",c.pressure," mb"]})]})]})})}),(0,t.jsx)(H,{positions:c.forecastTrack.map(e=>e.position),color:"#ef4444",weight:3,dashArray:"10, 5"}),c.forecastTrack.slice(1).map((e,a)=>(0,t.jsx)(S,{center:e.position,radius:3e3,fillColor:"#ef4444",fillOpacity:.8,color:"#white",weight:2,children:(0,t.jsx)(C,{children:(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsxs)("div",{className:"font-bold",children:["+",e.time,"H Forecast"]}),(0,t.jsxs)("div",{children:["Winds: ",e.intensity," mph"]})]})})},a)),b&&c.uncertaintyCone.map((e,a)=>{var s;return(0,t.jsx)(S,{center:(null===(s=c.forecastTrack.find(a=>a.time>=e.time))||void 0===s?void 0:s.position)||c.currentPosition,radius:1609*e.radius,fillColor:"#fbbf24",fillOpacity:.15,color:"#f59e0b",weight:1,dashArray:"5, 5"},a)}),u&&d.map((e,a)=>(0,t.jsx)(P,{positions:e.coordinates,fillColor:"#3b82f6",fillOpacity:.1,color:"#2563eb",weight:2,dashArray:"10, 5",children:(0,t.jsx)(C,{children:(0,t.jsxs)("div",{className:"text-sm font-semibold",children:["Tropical Storm Force Winds",(0,t.jsxs)("div",{className:"text-xs",children:["Arrival: ~",e.hours," hours"]})]})})},a)),y&&l.map(e=>{let a=j.divIcon({className:"branch-marker",html:'<div class="relative"><div class="absolute -inset-2 rounded-full opacity-40" style="background-color: '+getRiskColor(e.probability)+'"></div><div class="relative bg-white rounded-full p-2 border-2 shadow-lg" style="border-color: '+getRiskColor(e.probability)+'"><div class="text-xs font-bold" style="color: '+getRiskColor(e.probability)+'">'+e.probability+"%</div></div></div>",iconSize:[40,40],iconAnchor:[20,20]});return(0,t.jsx)(k,{position:e.coordinates,icon:a,children:(0,t.jsx)(C,{children:(0,t.jsxs)("div",{className:"p-2 min-w-[250px]",children:[(0,t.jsx)("h3",{className:"font-bold text-lg",children:e.locationName}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:[e.city,", ",e.county," County"]}),(0,t.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Risk Level:"}),(0,t.jsxs)("span",{className:"px-2 py-1 rounded text-white text-xs",style:{backgroundColor:getRiskColor(e.probability)},children:[getRiskLabel(e.probability)," (",e.probability,"%)"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Quadrant:"}),(0,t.jsx)("span",{className:"text-sm ".concat("Right-Front"===e.quadrant?"text-red-600 font-bold":""),children:e.quadrant})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Distance:"}),(0,t.jsxs)("span",{className:"text-sm",children:[e.distance," miles"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Evac Zone:"}),(0,t.jsx)("span",{className:"text-sm ".concat("A"===e.evacuationZone?"text-red-600 font-bold":""),children:e.evacuationZone})]}),(0,t.jsxs)("div",{className:"border-t pt-2 mt-2",children:[(0,t.jsx)("div",{className:"text-xs text-gray-600",children:"Most Likely Arrival:"}),(0,t.jsx)("div",{className:"font-semibold",children:e.mostLikelyArrival}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["Duration: ",e.duration]})]})]})]})})},e.branchNumber)})]}),(0,t.jsxs)("div",{className:"absolute top-4 right-4 z-[1000] space-y-4",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-3",children:[(0,t.jsxs)("div",{className:"flex items-center mb-2",children:[(0,t.jsx)(r.Z,{className:"h-4 w-4 mr-2 text-gray-600"}),(0,t.jsx)("span",{className:"text-sm font-semibold",children:"Map Layers"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("button",{onClick:()=>h("street"),className:"w-full text-left px-2 py-1 text-xs rounded ".concat("street"===m?"bg-blue-500 text-white":"hover:bg-gray-100"),children:"Street Map"}),(0,t.jsx)("button",{onClick:()=>h("satellite"),className:"w-full text-left px-2 py-1 text-xs rounded ".concat("satellite"===m?"bg-blue-500 text-white":"hover:bg-gray-100"),children:"Satellite"})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-3",children:[(0,t.jsx)("div",{className:"text-sm font-semibold mb-2",children:"Display Options"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"flex items-center text-xs",children:[(0,t.jsx)("input",{type:"checkbox",checked:u,onChange:e=>x(e.target.checked),className:"mr-2"}),"Wind Fields"]}),(0,t.jsxs)("label",{className:"flex items-center text-xs",children:[(0,t.jsx)("input",{type:"checkbox",checked:b,onChange:e=>p(e.target.checked),className:"mr-2"}),"Forecast Cone"]}),(0,t.jsxs)("label",{className:"flex items-center text-xs",children:[(0,t.jsx)("input",{type:"checkbox",checked:y,onChange:e=>N(e.target.checked),className:"mr-2"}),"Branch Locations"]})]})]})]}),(0,t.jsxs)("div",{className:"absolute bottom-4 left-4 z-[1000] bg-white rounded-lg shadow-lg p-4 max-w-sm",children:[(0,t.jsxs)("div",{className:"flex items-center mb-3",children:[(0,t.jsx)(o.Z,{className:"h-6 w-6 text-red-600 mr-2"}),(0,t.jsxs)("h2",{className:"text-lg font-bold",children:["Hurricane ",c.name]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Category:"}),(0,t.jsx)("span",{className:"ml-2 font-semibold",children:c.category})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Winds:"}),(0,t.jsxs)("span",{className:"ml-2 font-semibold",children:[c.maxWinds," mph"]})]}),(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Movement:"}),(0,t.jsx)("span",{className:"ml-2 font-semibold",children:c.movement})]}),(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Position:"}),(0,t.jsx)("span",{className:"ml-2 font-semibold",children:"120mi SW of Crystal River"})]})]}),(0,t.jsxs)("div",{className:"mt-3 pt-3 border-t",children:[(0,t.jsx)("div",{className:"text-xs text-gray-600 mb-2",children:"Branch Impact Summary:"}),(0,t.jsxs)("div",{className:"text-xs space-y-1",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Extreme Risk (≥85%):"}),(0,t.jsxs)("span",{className:"font-bold text-red-600",children:[l.filter(e=>e.probability>=85).length," branches"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"High Risk (70-84%):"}),(0,t.jsxs)("span",{className:"font-bold text-orange-600",children:[l.filter(e=>e.probability>=70&&e.probability<85).length," branches"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Right-Front Quadrant:"}),(0,t.jsxs)("span",{className:"font-bold text-red-600",children:[l.filter(e=>"Right-Front"===e.quadrant).length," branches"]})]})]})]})]}),(0,t.jsxs)("div",{className:"absolute bottom-4 right-4 z-[1000] bg-white rounded-lg shadow-lg p-3",children:[(0,t.jsx)("div",{className:"text-sm font-semibold mb-2",children:"Risk Legend"}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center text-xs",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-red-600 rounded mr-2"}),(0,t.jsx)("span",{children:"Extreme (≥85%)"})]}),(0,t.jsxs)("div",{className:"flex items-center text-xs",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-orange-600 rounded mr-2"}),(0,t.jsx)("span",{children:"High (70-84%)"})]}),(0,t.jsxs)("div",{className:"flex items-center text-xs",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-yellow-600 rounded mr-2"}),(0,t.jsx)("span",{children:"Moderate (50-69%)"})]}),(0,t.jsxs)("div",{className:"flex items-center text-xs",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-green-600 rounded mr-2"}),(0,t.jsx)("span",{children:"Low (30-49%)"})]}),(0,t.jsxs)("div",{className:"flex items-center text-xs",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-sky-600 rounded mr-2"}),(0,t.jsx)("span",{children:"Minimal (<30%)"})]})]})]})]})}}}]);